<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>YourHawkID · BAIS Survey · Page 2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>.required::after{content:" *"; color:#c00}</style>
</head>
<body class="bg-light">
<header class="bg-white border-bottom">
  <div class="container py-2 d-flex align-items-center gap-3">
    <a class="btn btn-sm btn-outline-secondary" href="hawkid_p1.html">Back</a>
    <strong>Business Analytics Student Survey</strong>
    <span class="ms-auto small text-secondary">page 2 of 2</span>
  </div>
</header>

<main class="container my-4">
  <!-- carry forward page 1 fields via querystring -->
  <form id="p2" class="needs-validation" novalidate action="hawkid_ty.html" method="get">
    <!-- Hidden inputs to forward p1 values to thank-you (so confirmation can show them) -->
    <div id="carry"></div>

    <div class="card shadow-sm">
      <div class="card-body">
        <h1 class="h4 mb-3">Program details</h1>

        <fieldset class="mb-3">
          <legend class="required fs-6 mb-2">I am finishing my</legend>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="year" id="y1" value="first year at Iowa" required>
            <label class="form-check-label" for="y1">first year at Iowa</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="year" id="y2" value="second year at Iowa" required>
            <label class="form-check-label" for="y2">second year at Iowa</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="year" id="y3" value="third year at Iowa" required>
            <label class="form-check-label" for="y3">third year at Iowa</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="year" id="y4" value="fourth year at Iowa" required>
            <label class="form-check-label" for="y4">fourth year at Iowa</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="year" id="y5" value="fifth or more year at Iowa" required>
            <label class="form-check-label" for="y5">fifth or more year at Iowa</label>
          </div>
          <div class="invalid-feedback d-block">Please select your year.</div>
        </fieldset>

        <fieldset class="mb-3" id="coreFieldset">
          <legend class="required fs-6 mb-2">BAIS core class I have completed</legend>
          <!-- name="core" allows multiple values -->
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c1" name="core" value="Information Systems"><label class="form-check-label" for="c1">Information Systems</label></div>
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c2" name="core" value="Operations"><label class="form-check-label" for="c2">Operations</label></div>
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c3" name="core" value="Foundations of Business Analytics"><label class="form-check-label" for="c3">Foundations of Business Analytics</label></div>
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c4" name="core" value="Computational Thinking"><label class="form-check-label" for="c4">Computational Thinking</label></div>
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c5" name="core" value="Database Management"><label class="form-check-label" for="c5">Database Management</label></div>
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c6" name="core" value="Data Wrangling"><label class="form-check-label" for="c6">Data Wrangling</label></div>
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c7" name="core" value="Data Mining"><label class="form-check-label" for="c7">Data Mining</label></div>
          <div class="form-check"><input class="form-check-input core" type="checkbox" id="c8" name="core" value="BAIS Capstone"><label class="form-check-label" for="c8">BAIS Capstone</label></div>
          <div class="invalid-feedback d-block" id="coreError">Please select at least one class.</div>
        </fieldset>

        <button class="btn btn-primary" type="submit">Finish</button>
      </div>
    </div>
  </form>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // carry p1 query params into hidden inputs so thank-you can display everything
  const params = new URLSearchParams(location.search);
  const carry = document.getElementById('carry');
  params.forEach((v,k) => {
    const input = document.createElement('input');
    input.type = 'hidden'; input.name = k; input.value = v;
    carry.appendChild(input);
  });

  // validation: HTML5 + at least one checkbox
  (() => {
    const form = document.getElementById('p2');
    const coreBoxes = [...document.querySelectorAll('.core')];
    const coreError = document.getElementById('coreError');

    function coreValid(){ return coreBoxes.some(cb => cb.checked); }

    form.addEventListener('submit', (e) => {
      if (!coreValid()) {
        e.preventDefault(); e.stopPropagation();
        coreError.style.display = 'block';
        document.getElementById('coreFieldset').setAttribute('aria-invalid','true');
      } else {
        coreError.style.display = 'none';
        document.getElementById('coreFieldset').removeAttribute('aria-invalid');
      }
      if (!form.checkValidity()) { e.preventDefault(); e.stopPropagation(); }
      form.classList.add('was-validated');
    });

    coreBoxes.forEach(cb => cb.addEventListener('change', () => {
      if (coreValid()) coreError.style.display = 'none';
    }));
  })();
</script>
</body>
</html>
